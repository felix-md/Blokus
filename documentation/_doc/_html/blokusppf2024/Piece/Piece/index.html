<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Piece (blokusppf2024.Piece.Piece)</title><link rel="stylesheet" href="../../../_odoc_support/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.2.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../_odoc_support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">blokusppf2024</a> &#x00BB; <a href="../index.html">Piece</a> &#x00BB; Piece</nav><header class="odoc-preamble"><h1>Module <code><span>Piece.Piece</span></code></h1></header><div class="odoc-content"><div class="odoc-spec"><div class="spec value anchored" id="val-matrix_height"><a href="#val-matrix_height" class="anchor"></a><code><span><span class="keyword">val</span> matrix_height : int</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-matrix_width"><a href="#val-matrix_width" class="anchor"></a><code><span><span class="keyword">val</span> matrix_width : int</span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-color"><a href="#type-color" class="anchor"></a><code><span><span class="keyword">type</span> color</span><span> = </span></code><ol><li id="type-color.None" class="def variant constructor anchored"><a href="#type-color.None" class="anchor"></a><code><span>| </span><span><span class="constructor">None</span></span></code></li><li id="type-color.Red" class="def variant constructor anchored"><a href="#type-color.Red" class="anchor"></a><code><span>| </span><span><span class="constructor">Red</span></span></code></li><li id="type-color.Green" class="def variant constructor anchored"><a href="#type-color.Green" class="anchor"></a><code><span>| </span><span><span class="constructor">Green</span></span></code></li><li id="type-color.Blue" class="def variant constructor anchored"><a href="#type-color.Blue" class="anchor"></a><code><span>| </span><span><span class="constructor">Blue</span></span></code></li><li id="type-color.Yellow" class="def variant constructor anchored"><a href="#type-color.Yellow" class="anchor"></a><code><span>| </span><span><span class="constructor">Yellow</span></span></code></li></ol></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-t"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> t</span><span> = </span><span>{</span></code><ol><li id="type-t.nb_block" class="def record field anchored"><a href="#type-t.nb_block" class="anchor"></a><code><span>nb_block : int;</span></code></li><li id="type-t.parts" class="def record field anchored"><a href="#type-t.parts" class="anchor"></a><code><span>parts : <span><a href="../PiecePart/index.html#type-t">PiecePart.t</a> array</span>;</span></code></li><li id="type-t.color" class="def record field anchored"><a href="#type-t.color" class="anchor"></a><code><span><span class="keyword">mutable</span> color : <a href="#type-color">color</a>;</span></code></li><li id="type-t.pos" class="def record field anchored"><a href="#type-t.pos" class="anchor"></a><code><span><span class="keyword">mutable</span> pos : int * int;</span></code></li></ol><code><span>}</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-copy"><a href="#val-copy" class="anchor"></a><code><span><span class="keyword">val</span> copy : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-create"><a href="#val-create" class="anchor"></a><code><span><span class="keyword">val</span> create : <span>int <span class="arrow">&#45;&gt;</span></span> <span><span><span>int array</span> array</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-color">color</a> <span class="arrow">&#45;&gt;</span></span> <span><span>(int * int)</span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p>Creates a new piece for the game.</p><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">nb_block</span> <p>The number of blocks that make up the piece.</p></li></ul><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">parts</span> <p>A 2D array representing the shape of the piece.</p></li></ul><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">color</span> <p>The color of the piece.</p></li></ul><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">pos</span> <p>The initial position of the piece on the board.</p></li></ul><ul class="at-tags"><li class="returns"><span class="at-tag">returns</span> <p>A new piece with the specified attributes.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-contains"><a href="#val-contains" class="anchor"></a><code><span><span class="keyword">val</span> contains : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p>Checks if the piece <code>p</code> contains the cell at coordinates (<code>i</code>, <code>j</code>).</p><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">p</span> <p>The piece to check.</p></li></ul><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">i</span> <p>The row index of the cell.</p></li></ul><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">j</span> <p>The column index of the cell.</p></li></ul><ul class="at-tags"><li class="returns"><span class="at-tag">returns</span> <p><code>true</code> if the piece contains the cell at (<code>i</code>, <code>j</code>), <code>false</code> otherwise.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-min_i"><a href="#val-min_i" class="anchor"></a><code><span><span class="keyword">val</span> min_i : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p><code>min_i p</code> returns the minimum index <code>i</code> of the piece <code>p</code>. This function is used to determine the highest point of the piece.</p><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">p</span> <p>The piece for which the minimum index is to be found.</p></li></ul><ul class="at-tags"><li class="returns"><span class="at-tag">returns</span> <p>The minimum index <code>i</code> of the piece <code>p</code>..</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-min_j"><a href="#val-min_j" class="anchor"></a><code><span><span class="keyword">val</span> min_j : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p><code>min_j p</code> returns the minimum index <code>j</code> of the piece <code>p</code>. This function is used to determine point of the piece furthest to the left.</p><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">p</span> <p>The piece for which the minimum index is to be found.</p></li></ul><ul class="at-tags"><li class="returns"><span class="at-tag">returns</span> <p>The minimum index <code>j</code> of the piece <code>p</code>..</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-max_i"><a href="#val-max_i" class="anchor"></a><code><span><span class="keyword">val</span> max_i : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p><code>max_i p</code> returns the maximum index <code>i</code> of the piece <code>p</code>. This function is used to determine the lowest point of the piece.</p><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">p</span> <p>The piece for which the maximum index is to be found.</p></li></ul><ul class="at-tags"><li class="returns"><span class="at-tag">returns</span> <p>The maximum index <code>i</code> of the piece <code>p</code>.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-max_j"><a href="#val-max_j" class="anchor"></a><code><span><span class="keyword">val</span> max_j : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p><code>max_j p</code> returns the maximum index <code>j</code> of the piece <code>p</code>. This function is used to determine point of the piece furthest to the right.</p><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">p</span> <p>The piece for which the maximum index is to be found.</p></li></ul><ul class="at-tags"><li class="returns"><span class="at-tag">returns</span> <p>The maximum index <code>j</code> of the piece <code>p</code>.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-flip"><a href="#val-flip" class="anchor"></a><code><span><span class="keyword">val</span> flip : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Flips the piece <code>p</code> horizontally.</p><p>This function flips the <code>p</code> horizontally by mirroring its parts along the vertical axis. It first determines the maximum column index (j) among the parts of the <code>p</code>. Then, it calculates the new column index for each part by subtracting the current column index from the maximum column index. After flipping the parts, it checks if the new positions of the parts are within the board limits. If the new positions are valid, it updates the <code>p</code>'s parts with the new column indices.</p><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">p</span> <p>The piece to be flipped.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-rotate"><a href="#val-rotate" class="anchor"></a><code><span><span class="keyword">val</span> rotate : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Rotates the given piece 90 degrees counterclockwise while maintaining its relative position on the board.</p><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">p</span> <p>The piece to be rotated, which includes its parts and position.</p><p>The function performs the following steps: 1. Saves the original minimum coordinates of the <code>p</code> parts. 2. Rotates each part of the <code>p</code> 90 degrees counterclockwise. 3. Calculates the new minimum coordinates after rotation. 4. Computes the offsets needed to align the new minimum coordinates with the original ones. 5. Adjusts the rotated parts using the calculated offsets. 6. Checks if the adjusted parts are within the board limits. 7. If the adjusted parts are within bounds, updates the <code>p</code> parts with the new coordinates.</p></li></ul><ul class="at-tags"><li class="returns"><span class="at-tag">returns</span> <p><code>unit</code></p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-move"><a href="#val-move" class="anchor"></a><code><span><span class="keyword">val</span> move : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Moves the piece `p` by `i` units vertically and `j` units horizontally.</p><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">p</span> <p>The piece to be moved.</p></li></ul><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">i</span> <p>The number of units to move the piece vertically.</p></li></ul><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">j</span> <p>The number of units to move the piece horizontally.</p><p>if the piece is out of bounds after the move, the piece is not moved.</p></li></ul><ul class="at-tags"><li class="returns"><span class="at-tag">returns</span> <p>Unit. The function modifies the piece in place.</p></li></ul></div></div></div></body></html>